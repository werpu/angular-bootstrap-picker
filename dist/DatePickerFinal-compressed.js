!function t(e,n,i){function r(o,s){if(!n[o]){if(!e[o]){var c="function"==typeof require&&require;if(!s&&c)return c(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[o]={exports:{}};e[o][0].call(d.exports,function(t){var n=e[o][1][t];return r(n?n:t)},d,d.exports,t,e,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){!function(i){if("object"==typeof e&&"object"==typeof e.exports){var r=i(t,n);void 0!==r&&(e.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports","./helperComponents/RangeInput","./datePicker/DatePickerView","./datePicker/DatePickerController","./eventPicker/EventPicker","./services/DatePickerService"],i)}(function(t,e){"use strict";var n=t("./helperComponents/RangeInput"),i=t("./datePicker/DatePickerView"),r=t("./datePicker/DatePickerController"),a=t("./eventPicker/EventPicker"),o=t("./services/DatePickerService"),s=function(){function t(){this.template=i._DatePickerView.template,this.controllerAs=i._DatePickerView.controllerAs,this.bindings=i._DatePickerView.bindings,this.transclude=i._DatePickerView.transclude,this.require=i._DatePickerView.require,this.controller=["$scope","$element","$timeout",r._DatePickerController]}return t}();e.DatePicker=s,angular.module("werpu.bootstrap.picker",[]).component("datePicker",new s).component("internalRangeInput",new n.RangeInput).component("eventPicker",new a.EventPicker).service("datePickerService",o.DatePickerService)})},{"./datePicker/DatePickerController":2,"./datePicker/DatePickerView":3,"./eventPicker/EventPicker":4,"./helperComponents/RangeInput":5,"./services/DatePickerService":6}],2:[function(t,e,n){!function(i){if("object"==typeof e&&"object"==typeof e.exports){var r=i(t,n);void 0!==r&&(e.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports","../utils/DatePickerTypes","../utils/DateUtils","../utils/ViewModelBuilder","../utils/BehavioralFixes"],i)}(function(t,e){"use strict";var n=t("../utils/DatePickerTypes"),i=t("../utils/DateUtils"),r=t("../utils/ViewModelBuilder"),a=t("../utils/BehavioralFixes"),o=function(){function t(){}return t.DEFAULT_DATE_FORMAT="DD.MM.YYYY",t.DEFAULT_DATE_TIME_FORMAT="DD.MM.YYYY HH:mm",t.DEFAULT_PICKER_MODE="DATE",t.PICKER_VIEW_DATE="DATE",t.PICKER_VIEW_TIME="TIME",t.PICKER_VIEW_MONTH="MONTH",t.PICKER_VIEW_YEAR="YEAR",t.DEFAULT_PICKER_LABEL="Date",t}(),s=function(){function t(t,e,i){var r=this;this.$scope=t,this.$element=e,this.$timeout=i,this.getTimezone=function(){return r.timezone||moment.tz.guess()},this.getDateFormat=function(){return r.dateFormat||(r.pickerMode===o.DEFAULT_PICKER_MODE?o.DEFAULT_DATE_FORMAT:o.DEFAULT_DATE_TIME_FORMAT)},this.updateModel=function(t){for(var e=t,n=0;r.ngModel.$formatters&&n<r.ngModel.$formatters.length;n++)e=r.ngModel.$formatters[n](e);r.innerSelection=e,r.$timeout(function(){r.updatePickerData()})},this.currentDate=null,this.doubleBufferDate=null,this.buttonLabel="undefined"==typeof this.buttonLabel||null==this.buttonLabel?o.DEFAULT_PICKER_LABEL:this.buttonLabel,this.pickerMode="undefined"==typeof this.pickerMode||null==this.pickerMode?o.DEFAULT_PICKER_MODE:this.pickerMode,this.visibleDays=[],this.view=o.PICKER_VIEW_DATE,this.viewStack=[],Object.defineProperty(this,"currentHour",{get:function(){return r.currentDate?r.currentDate.get("hour"):0},set:function(t){r.isValidHour(t)&&(r.currentDate.set("hour",t),r.selectDate(new n.PickerDate(!1,r.currentDate,1,!0)))}}),Object.defineProperty(this,"currentMinute",{get:function(){return r.currentDate?r.currentDate.get("minute"):0},set:function(t){r.isValidMinute(t)&&(r.currentDate.set("minute",t),r.selectDate(new n.PickerDate(!1,r.currentDate,1,!0)))}}),t.$watch("ctrl.innerSelection",function(t,e){t!=e&&r.ngModel.$setViewValue(t)}),t.$watch("ctrl.startDate",function(t,e){if(t&&r.currentDate){var a=moment.tz(t,r.getTimezone());if(a.isSameOrBefore(r.currentDate))return void i(function(){r.updatePickerData()});r.currentDate=r.endOfDay?a.endOf("day"):a;var s=moment.tz(r.ngModel.$modelValue,r.getTimezone());(r.pickerMode!=o.DEFAULT_PICKER_MODE||r.pickerOnlyMode)&&(s&&s.get("day")==r.currentDate.get("day")&&s.get("month")==r.currentDate.get("month")&&s.get("year")==r.currentDate.get("year")||r.selectDate(new n.PickerDate(!1,r.currentDate,1,!0)))}r.currentDate&&i(function(){r.updatePickerData()})})}return t.prototype.isSelectedDate=function(t){if(this.ngModel.$modelValue){var e=moment.tz(this.ngModel.$modelValue,this.getTimezone());return e.isSame(t.momentDate,"date")&&e.isSame(t.momentDate,"month")&&e.isSame(t.momentDate,"year")}return!1},t.prototype.isChosenDate=function(t){if(this.doubleBufferDate){var e=this.doubleBufferDate;return e.isSame(t.momentDate,"date")&&e.isSame(t.momentDate,"month")&&e.isSame(t.momentDate,"year")}return!1},t.prototype.isToday=function(t){return i.DateUtils.isToday(this.timezone,t.momentDate)},t.prototype.isTodayMonth=function(t){return i.DateUtils.isCurrentMonth(this.timezone,this.selectedDate.momentDate)},t.prototype.isSameMonth=function(t){return i.DateUtils.isSameMonth(this.timezone,this.ngModel.$modelValue,this.selectedMonth.momentDate)},t.prototype.isChosenMonth=function(t){if(!this.doubleBufferDate)return!1;var e=this.doubleBufferDate;return e.isSame(t.momentDate,"month")&&e.isSame(t.momentDate,"year")},t.prototype.isTodayYear=function(t){return i.DateUtils.isCurrentYear(this.timezone,t.momentDate)},t.prototype.isSameYear=function(t){return i.DateUtils.isSameYear(this.timezone,this.ngModel.$modelValue,t.momentDate)},t.prototype.isChosenYear=function(t){if(!this.doubleBufferDate)return!1;var e=this.doubleBufferDate;return e.isSame(t.momentDate,"year")},t.prototype.isValidTime=function(t,e){if(t<0||t>23||e<0||e>59)return!1;var n=moment.tz(this.currentDate.toDate(),this.getTimezone()),i=this.startDate?moment.tz(this.startDate,this.getTimezone()).startOf("day"):null,r=this.endDate?moment.tz(this.endDate,this.getTimezone()).endOf("day"):null;return n.set("hour",t).set("minute",e),!n.isBefore(i)&&!n.isAfter(r)},t.prototype.isValidHour=function(t){if(t<0||t>23)return!1;var e=moment.tz(this.currentDate.toDate(),this.getTimezone()),n=this.startDate?moment.tz(this.startDate,this.getTimezone()):null,i=this.endDate?moment.tz(this.endDate,this.getTimezone()):null;return e.set("hour",t),!e.isBefore(n)&&!e.isAfter(i)},t.prototype.isValidMinute=function(t){if(t<0||t>59)return!1;var e=moment.tz(this.currentDate.toDate(),this.getTimezone()),n=this.startDate?moment.tz(this.startDate,this.getTimezone()):null,i=this.endDate?moment.tz(this.endDate,this.getTimezone()):null;return e.set("minute",t),!e.isBefore(n)&&!e.isAfter(i)},t.prototype.nextHour=function(){this.isValidHour(this.currentDate.get("hour")+1)&&(this.currentDate.add(1,"hour"),this.selectDate(new n.PickerDate(!1,this.currentDate,1,!0)))},t.prototype.prevHour=function(){this.isValidHour(this.currentDate.get("hour")-1)&&(this.currentDate.subtract(1,"hour"),this.selectDate(new n.PickerDate(!1,this.currentDate,1,!0)))},t.prototype.nextMinute=function(){this.isValidMinute(this.currentDate.get("minute")+1)&&(this.currentDate.add(1,"minute"),this.selectDate(new n.PickerDate(!1,this.currentDate,1,!0)))},t.prototype.prevMinute=function(){this.isValidMinute(this.currentDate.get("minute")-1)&&(this.currentDate.subtract(1,"minute"),this.selectDate(new n.PickerDate(!1,this.currentDate,1,!0)))},t.prototype._fixCurrentDate=function(){var t=this.currentDate,e=this.startDate?moment.tz(this.startDate,this.getTimezone()):null,n=this.endDate?moment.tz(this.endDate,this.getTimezone()):null;e&&moment.tz(t,this.getTimezone()).isBefore(e)&&(this.currentDate=e),n&&moment.tz(t,this.getTimezone()).isAfter(n)&&(this.currentDate=n)},t.prototype.selectDate=function(t){t.invalid||(this.ngModel.$modelValue||(this.currentDate=t.momentDate,"DOUBLE_BUFFERED"==this.pickerOnlyMode&&(this.doubleBufferDate=moment.tz(this.currentDate.toDate(),this.getTimezone()))),this.currentDate!=t.momentDate&&(this.currentDate.set("date",t.momentDate.get("date")),this.currentDate.set("month",t.momentDate.get("month")),this.currentDate.set("year",t.momentDate.get("year"))),this.pickerMode===o.DEFAULT_PICKER_MODE&&(this.endOfDay?this.currentDate.endOf("day"):this.currentDate.startOf("day")),this._fixCurrentDate(),"DOUBLE_BUFFERED"==this.pickerOnlyMode&&(this.doubleBufferDate=moment.tz(this.currentDate.toDate(),this.getTimezone())),(!this.pickerOnlyMode||this.pickerOnlyMode&&"DOUBLE_BUFFERED"!=this.pickerOnlyMode)&&this.updateModel(this.currentDate.toDate()),this.onDateSelection({$picker:this,$date:this.currentDate.toDate()}),this.pickerMode!==o.DEFAULT_PICKER_MODE||this.pickerOnlyMode||this.close())},t.prototype.selectMonth=function(t){t.invalid||(this.ngModel.$modelValue?(this.currentDate.set("month",t.momentDate.get("month")),this.currentDate.set("year",t.momentDate.get("year"))):(this.currentDate=moment.tz(new Date,this.getTimezone()),this.currentDate.set("month",t.momentDate.get("month"))),this._fixCurrentDate(),this.onMonthSelection({$picker:this,$date:this.currentDate.toDate()}),this.goBackInView())},t.prototype.selectYear=function(t){if(!t.invalid){if(this.ngModel.$modelValue){moment.tz(this.ngModel.$modelValue,this.getTimezone());this.currentDate.set("year",t.momentDate.get("year"))}else this.currentDate=moment.tz(new Date,this.getTimezone()),this.currentDate.set("year",t.momentDate.get("year"));this._fixCurrentDate(),this.onYearSelection({$picker:this,$date:this.currentDate.toDate()}),this.goBackInView()}},t.prototype.updatePickerData=function(){this.monthPickerData=r.ViewModelBuilder.calculateDateView(this.currentDate.toDate(),this.startDate,this.endDate,this.getTimezone()),this.yearPickerData=r.ViewModelBuilder.calculateMonthView(this.currentDate.toDate(),this.startDate,this.endDate,this.getTimezone()),this.decadePickerData=r.ViewModelBuilder.calculateYearView(this.currentDate.toDate(),this.startDate,this.endDate,this.getTimezone());var t=this.currentDate.get("year")%20-1;this.decadeFrom=moment.tz(this.currentDate.toDate(),this.getTimezone()).subtract(t,"year").format("YYYY");var t=this.currentDate.get("year")%20-1,e=20-t-1;this.decadeTo=moment.tz(this.currentDate.toDate(),this.getTimezone()).add(e,"year").format("YYYY")},t.prototype.openPicker=function(){var t=this,e=this.timezone||moment.tz.guess();this.currentDate=this.ngModel.$modelValue?moment.tz(this.ngModel.$modelValue,e):moment.tz(new Date,e),this.updatePickerData(),a.BehavioralFixes.openDropDown(this.$element,this),this.documentClickHandler||this.$timeout(function(){a.BehavioralFixes.registerDocumentBindings(t.$element,t)})},t.prototype.prevMonth=function(){this.currentDate=this.currentDate.subtract(1,"month"),this.updatePickerData()},t.prototype.nextMonth=function(){this.currentDate=this.currentDate.add(1,"month"),this.updatePickerData()},t.prototype.prevYear=function(){this.currentDate=this.currentDate.subtract(1,"year"),this.updatePickerData()},t.prototype.nextYear=function(){this.currentDate=this.currentDate.add(1,"year"),this.updatePickerData()},t.prototype.prevDecade=function(){this.currentDate=this.currentDate.subtract(20,"year"),this.updatePickerData()},t.prototype.nextDecade=function(){this.currentDate=this.currentDate.add(20,"year"),this.updatePickerData()},t.prototype.clear=function(){this.innerSelection=""},t.prototype.today=function(){this.currentDate=moment.tz(new Date,this.getTimezone()),this.pickerMode==o.DEFAULT_PICKER_MODE&&this.currentDate.startOf("day"),this._fixCurrentDate(),this.updateModel(this.currentDate.toDate()),this.close()},t.prototype.close=function(){this.view=o.DEFAULT_PICKER_MODE,this.viewStack=[],this.pickerVisible=!1,a.BehavioralFixes.unregisterDocumentBindings(this),a.BehavioralFixes.closeDropDown(this.$element,this),this.$element.find("input[type=text]:first").focus()},t.prototype.set=function(){"DOUBLE_BUFFERED"==this.pickerOnlyMode&&(this.currentDate=moment.tz(this.doubleBufferDate.toDate(),this.getTimezone())),this.updateModel(this.currentDate.toDate())},t.prototype.switchToMonthView=function(){this.viewStack.unshift(this.view),this.view=o.PICKER_VIEW_MONTH},t.prototype.switchToYearView=function(){this.viewStack.unshift(this.view),this.view=o.PICKER_VIEW_YEAR},t.prototype.switchToTimeView=function(){this.viewStack.unshift(this.view),this.view=o.PICKER_VIEW_TIME},t.prototype.goBackInView=function(){this.updatePickerData(),this.view=this.viewStack.shift()},t.prototype.$postLink=function(){var t=this;this.$timeout(function(){a.BehavioralFixes.registerPopupBindings(t.$element),a.BehavioralFixes.registerKeyBindings(t.$element)}),this.ngModel.$render=function(){t.innerSelection=t.ngModel.$viewValue},this.ngModel.$parsers.push(function(e){if(""==e)return null;var n=t.endOfDay?moment.tz(e,t.getDateFormat(),t.getTimezone()).endOf("day").toDate():moment.tz(e,t.getDateFormat(),t.getTimezone()).toDate(),i=t.startDate?moment.tz(t.startDate,t.getTimezone()):null,r=t.endDate?moment.tz(t.endDate,t.getTimezone()):null;return i&&moment.tz(n,t.getTimezone()).isBefore(i)&&i.isSame(n,"day")&&i.isSame(n,"month")&&i.isSame(n,"year")?t.startDate:r&&moment.tz(n,t.getTimezone()).isAfter(r)&&r.isSame(n,"day")&&r.isSame(n,"month")&&r.isSame(n,"year")?t.endDate:n}),this.ngModel.$validators.validDate=function(e,n){return!n||moment.tz(n,t.getDateFormat(),t.getTimezone()).isValid()},this.ngModel.$validators.dateRange=function(e,n){if(null==e)return!0;var i=t.timezone||moment.tz.guess(),r=moment.tz(e,i),a=t.startDate?moment.tz(t.startDate,i).startOf("day"):null,o=t.endDate?moment.tz(t.endDate,i).endOf("day"):null,s=!1;return a&&(s=s||r.isBefore(a)),!s&&o&&(s=s||r.isAfter(o)),!s},this.ngModel.$formatters.push(function(e){if(null==e)return"";var n=t.timezone||moment.tz.guess();return moment.tz(e,n).format(t.getDateFormat())}),this.pickerOnlyMode&&this.openPicker()},t.prototype.$onDestroy=function(){a.BehavioralFixes.unregisterDocumentBindings(this)},t}();e._DatePickerController=s})},{"../utils/BehavioralFixes":7,"../utils/DatePickerTypes":8,"../utils/DateUtils":9,"../utils/ViewModelBuilder":10}],3:[function(t,e,n){!function(i){if("object"==typeof e&&"object"==typeof e.exports){var r=i(t,n);void 0!==r&&(e.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports"],i)}(function(t,e){"use strict";var n=function(){function t(){}return t.template=function(){var t='\n\n                <div class="input-group">\n                   <input type="text" placeholder="{{ctrl.placeholder}}" class="form-control" name="{{ctrl.name}}_inner" ng-model="ctrl.innerSelection">\n                   <span class="input-group-btn">\n                       <button type="button" class="picker-open btn btn-default" ng-click="ctrl.openPicker()">\n                             <span ng-class="{\'glyphicon glyphicon-align-right glyph-icon glyphicon-calendar\': !ctrl.buttonStyleClass, ctrl.buttonStyleClass: ctrl.buttonStyleClass}"> {{ctrl.buttonLabel}} </span>\n                       </button>\n                   </span> \n               </div>\n               <input type="button" class="picker-close" ng-click="ctrl.close()" value="Close" ng-show="false"/>\n        ',e='\n           <input type="text" style="display: none;" placeholder="{{ctrl.placeholder}}" class="form-control" name="{{ctrl.name}}_inner" ng-model="ctrl.innerSelection">\n        ',n='\n            <div class="time-picker" ng-if="ctrl.view == \'DATE\' && ctrl.pickerMode == \'DATE_TIME\'" >\n                <table>\n                   <thead>\n                        \n                    </thead>\n                    <tbody>\n                        \n                         <tr>\n                            <td class="glyphicon glyphicon-chevron-up" ng-class="{\'invalid\' : !ctrl.isValidHour(ctrl.currentDate.get(\'hour\') + 1)}" ng-click="ctrl.nextHour()">\n                            </td>\n                            <td></td>\n                            <td class="glyphicon glyphicon-chevron-up" ng-class="{\'invalid\' : !ctrl.isValidMinute(ctrl.currentDate.get(\'minute\') + 1)}" ng-click="ctrl.nextMinute()">\n                            </td>\n                        </tr>\n                        <tr>\n                            <td class="selected-hour">\n                                <internal-range-input class="hour-input" from="0" to="23" ng-model="ctrl.currentHour"/>    \n                            </td>\n                            <td class="invalid">:</td>\n                            <td class="selected-minute">\n                                <internal-range-input class="minute-input" from="0" to="59" ng-model="ctrl.currentMinute"/> \n                            </td>\n                        </tr>\n                         <tr>\n                            <td class="glyphicon glyphicon-chevron-down" ng-class="{\'invalid\' : !ctrl.isValidHour(ctrl.currentDate.get(\'hour\') - 1)}" ng-click="ctrl.prevHour()">\n                            </td>\n                            <td></td>\n                            <td class="glyphicon glyphicon-chevron-down" ng-class="{\'invalid\' : !ctrl.isValidMinute(ctrl.currentDate.get(\'minute\') - 1)}" ng-click="ctrl.prevMinute()">\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n                <div class="button-group bottom-buttons" ng-if="ctrl.view == \'TIME\'">\n                  <input type="button" class="btn btn-default btn-sm" ng-click="ctrl.goBackInView()" value="Back" />\n                </div>\n            </div>\n        ',i='\n               <!-- date view - default view -->\n               <div class="date-picker" ng-if="ctrl.view == \'DATE\'">                \n                    <table>\n                        <thead>\n                            <!-- TODO year forward and backward -->\n                        \n                            <tr ng-if="ctrl.pickerMode == \'DATE_TIME\'">\n                                <td colspan="8" class="invalid picker-title" >{{ctrl.innerSelection}}</td>\n                            </tr>\n                            \n                            <tr>\n                                <td><a class="prev glyphicon glyphicon-menu-left" ng-click="ctrl.prevMonth()"></a></td><td colspan="2" ng-click="ctrl.switchToMonthView()">{{ctrl.currentDate.format("MMMM")}}</td><td><a class="next glyphicon glyphicon-menu-right" ng-click="ctrl.nextMonth()"></a></td>\n                                <td><a class="prev glyphicon glyphicon-menu-left" ng-click="ctrl.prevYear()"></a></td><td colspan="2" ng-click="ctrl.switchToYearView()">{{ctrl.monthPickerData.year}}</td><td><a class="next glyphicon glyphicon-menu-right" ng-click="ctrl.nextYear()"></a></td>\n                            </tr>\n                            <tr>\n                                <td class="calendarWeek"><!-- week of year --></td>\n                                <td class="dayOfWeek" ng-repeat="dayOfWeek in ctrl.monthPickerData.dayOfWeek" ng-click="ctrl.selectDate(dayOfWeek)">{{::dayOfWeek}}</td>    \n                            </tr>\n                        </thead>\n                        <tbody>\n                            <tr ng-repeat="week in ctrl.monthPickerData.weeks">\n                                <td class="calendarWeek">{{::week.calendarWeek}}</td>\n                                <td class="day" ng-repeat="day in week.days" ng-class="{\'outside\': !day.sameMonth, \'invalid\': day.invalid, \'selected\' : ctrl.isSelectedDate(day), \'chosen\' : ctrl.isChosenDate(day), \'today\': ctrl.isToday(day)}, \'event\': day.event" class="{{day.event.importance}}" ng-click="ctrl.selectDate(day)">{{::day.day}}</td>\n                            </tr>\n                        </tbody>\n                        \n                    </table>\n                \n                    '+n+'\n                    \n                    <div class="additional-content" ng-transclude="additionalContentDate"></div>\n                    \n                    <div class="button-group bottom-buttons col-xs-12 col-sm-12 col-md-12 col-lg-12">\n                        <div class="additional-buttons" ng-transclude="additionalButtonsDate"></div>\n                        <input type="button" class="Sset btn btn-default btn-sm" ng-click="ctrl.set()" value="Set" ng-if="ctrl.pickerOnlyMode == \'DOUBLE_BUFFERED\'" />\n                        <input type="button" class="clear btn btn-default btn-sm" ng-click="ctrl.clear()" value="Clear" ng-if="!ctrl.pickerOnlyMode" />\n                        <input type="button" class="today btn btn-default btn-sm" ng-click="ctrl.today()" value="Today" />\n                        <input type="button" class="picker-close btn btn-default btn-sm" ng-click="ctrl.close()" ng-if="!ctrl.pickerOnlyMode" value="Close" ng-if="!ctrl.pickerOnlyMpde" />\n                    </div>\n               </div> \n        ',r='\n            <!-- month view -->\n            <div class="month-picker" ng-if="ctrl.view == \'MONTH\'">\n                 <table>\n                    <thead>\n                          <tr>\n                          <td><a class="prev glyphicon glyphicon-menu-left" ng-click="ctrl.prevYear()" class="glyphicon glyphicon-menu-left"></a></td>\n                          <td ng-click="ctrl.switchToYearView()">{{ctrl.monthPickerData.year}}</td>\n                          <td><a class="next glyphicon glyphicon-menu-right" ng-click="ctrl.nextYear()"></a></td>\n                          </tr>\n                    </thead>\n                    <tbody>\n                        <tr ng-repeat="monthRow in ctrl.yearPickerData.row">\n                            <td ng-repeat="month in monthRow" ng-class="{\'invalid\': month.invalid, \'selected\' : ctrl.isSameMonth(month), \'chosen\' : ctrl.isChosenMonth(month), \'today\': ctrl.isTodayMonth(month)}"\n                            ng-click="ctrl.selectMonth(month)"\n                            >{{::month.month}}</td>\n                        </tr>\n                    </tbody>\n                 </table>   \n            \n                 <div class="additional-content" ng-transclude="additionalContentMonth"></div>\n                <div class="button-group bottom-buttons">\n                    <div class="additional-buttons" ng-transclude="additionalButtonsMonth"></div>\n                    <input type="button" class="btn btn-default btn-sm" ng-click="ctrl.goBackInView()" value="Back" />\n                </div>\n            </div>    \n        ',a='\n            <!-- year view -->  \n            <div class="year-picker" ng-if="ctrl.view == \'YEAR\'">\n                  <table>\n                    <thead>\n                    <tr>\n                        <td><a ng-click="ctrl.prevDecade()" class="glyphicon glyphicon-menu-left"></a></td>\n                        <td colspan="3" class="no-link">{{ctrl.decadeFrom}} - {{ctrl.decadeTo}}</td>\n                        <td><a ng-click="ctrl.nextDecade()" class="glyphicon glyphicon-menu-right"></a></td>\n                    </tr>\n                    </thead>\n                    <tbody>\n                        <tr ng-repeat="yearrow in ctrl.decadePickerData.row">\n                            <td ng-repeat="year in yearrow"\n                            ng-class="{\'invalid\': year.invalid, \'selected\' : ctrl.isSameYear(year), \'chosen\' : ctrl.isChosenYear(year), \'today\': ctrl.isTodayYear(year)}"\n                             ng-click="ctrl.selectYear(year)"\n                            >{{::year.year}}</td></td>\n                        </tr>\n                    </table>\n                  <div class="additional-content" ng-transclude="additionalContentYear"></div>  \n                  <div class="button-group bottom-buttons">\n                    <div class="additional-buttons" ng-transclude="additionalButtonsYear"></div>\n                    <input type="button" class="btn btn-default btn-sm" ng-click="ctrl.goBackInView()" value="Back" />\n                  </div>\n            </div>   \n        ';return'\n           <div class="dropdown" ng-if="!ctrl.pickerOnlyMode"> \n                '+t+' \n               <div class="dropdown-menu picker-popup">\n                    <div class="content" ng-if="ctrl.isOpen">\n                       '+i+"\n                       \n                       "+r+"                   \n                             \n                       "+a+'\n                   </div>\n               \n                </div>\n            </div> \n            <div class="dropdown picker-standalone" ng-if="ctrl.pickerOnlyMode">\n                 '+e+'\n                 <div class="picker-popup">\n                  <div class="content"> \n                     '+i+"\n                           \n                     "+r+"                   \n                                 \n                     "+a+"\n                 </div>\n                 </div>\n            </div>  \n                 \n        "},t.bindings={name:"@",timezone:"@",startDate:"<",endDate:"<",dateFormat:"@",placeholder:"@",buttonLabel:"@",pickerMode:"@",pickerOnlyMode:"@",endOfDay:"<",onYearSelection:"&",onMonthSelection:"&",onDateSelection:"&",buttonStyleClass:"@?"},t.require={ngModel:"ngModel"},t.transclude={additionalButtonsDate:"?additionalButtonsDate",additionalContentDate:"?additionalContentDate",additionalButtonsMonth:"?additionalButtonsMonth",additionalContentMonth:"?additionalContentMonth",additionalButtonsYear:"?additionalButtonsYear",additionalContentYear:"?additionalContentYear"},t.controllerAs="ctrl",t}();e._DatePickerView=n})},{}],4:[function(t,e,n){!function(i){if("object"==typeof e&&"object"==typeof e.exports){var r=i(t,n);void 0!==r&&(e.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports","../utils/DateUtils","../utils/ViewModelBuilder"],i)}(function(t,e){"use strict";var n=t("../utils/DateUtils"),i=t("../utils/ViewModelBuilder"),r=function(){function t(){}return t.template=function(){return'\n        <div class="event-picker">\n            <table ng-repeat="datePickerPage in ctrl.pickerPage.months">\n                <thead>\n                    <tr>\n                        <td class="calendarWeek"><!-- week of year --></td>\n                        <td class="dayOfWeek" ng-repeat="dayOfWeek in datePickerPage.dayOfWeek" ng-click="ctrl.selectDate(dayOfWeek)">{{::dayOfWeek}}</td>    \n                    </tr>\n                </thead>\n                <tbody>\n                     <tr ng-repeat="week in datePickerPage.weeks">\n                                <td class="calendarWeek">{{::week.calendarWeek}}</td>\n                                <td class="day" ng-repeat="day in week.days" ng-class="{\'outside\': !day.sameMonth, \'invalid\': day.invalid, \'selected\' : ctrl.isSelectedDate(day), \'today\': ctrl.isToday(day)}" ng-click="ctrl.selectDate(day)">{{::day.day}}</td>\n                   </tr>    \n                </tbody>\n            </table>\n        </div>\n        '},t.controllerAs="ctrl",t.bindings={timezone:"@",startDate:"<",endDate:"<",events:"<"},t.require={ngModel:"ngModel"},t}(),a=function(){function t(t,e,r){var a=this;this.$scope=t,this.$element=e,this.$timeout=r,this.startDate=moment.tz(n.DateUtils.getTimezone(this.timezone)).startOf("day").subtract(30,"days").toDate(),this.endDate=moment.tz(n.DateUtils.getTimezone(this.timezone)).endOf("day").toDate(),this.rangeModelIdx={},t.$watch("ctrl.startDate",function(t,e){t?a.startDate=t:a.startDate=moment.tz(n.DateUtils.getTimezone(a.timezone)).startOf("day").subtract(30,"days").toDate()}),t.$watch("ctrl.endDate",function(t,e){t?a.endDate=t:a.endDate=moment.tz(n.DateUtils.getTimezone(a.timezone)).endOf("day").toDate()}),t.$watch("ctrl.events",function(t,e){a.updateRange(t),a.rangeModelIdx=i.ViewModelBuilder.buildModelIdx(t,a.timezone)},!0)}return t.prototype.updateRange=function(t){this.pickerPage=i.ViewModelBuilder.calculateEventDateView(t,this.startDate,this.endDate,n.DateUtils.getTimezone(this.timezone))},t.prototype.$postLink=function(){this.updateRange(this.events)},t.prototype.eventPresent=function(t){return this.events?this.rangeModelIdx[t.format("dd.mm.yyyy")]:null},t.prototype.isActive=function(t){var e=moment.tz(this.startDate,this.timezone),n=moment.tz(this.endDate,this.timezone);return t&&t.isBetween(e.subtract(1,"day"),n.add(1,"day"),"day")},t.prototype.isSelectedDate=function(t){var e=moment.tz(this.timezone,this.ngModel.$modelValue);return n.DateUtils.isSameDay(e,t.momentDate)},t.prototype.selectDate=function(t){this.ngModel.$modelValue=t.momentDate.toDate()},t.prototype.isToday=function(t){return n.DateUtils.isToday(this.timezone,t.momentDate)},t}(),o=function(){function t(){this.template=r.template,this.controllerAs=r.controllerAs,this.bindings=r.bindings,this.require=r.require,this.controller=["$scope","$element","$timeout",a]}return t}();e.EventPicker=o})},{"../utils/DateUtils":9,"../utils/ViewModelBuilder":10}],5:[function(t,e,n){!function(i){if("object"==typeof e&&"object"==typeof e.exports){var r=i(t,n);void 0!==r&&(e.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports"],i)}(function(t,e){"use strict";var n=function(){function t(){this.template=function(){return'\n           <input type="text" ng-model="ctrl.inputText" />\n        '},this.controllerAs="ctrl",this.bindings={from:"<",to:"<"},this.require={ngModel:"ngModel"},this.controller=["$scope","$element","$timeout",function(t,e,n){var i=this;t.$watch("ctrl.inputText",function(t,e){t!=e&&i.ngModel.$setViewValue(t)}),this.$postLink=function(){i.ngModel.$render=function(){i.inputText=i.ngModel.$viewValue},e.find("input").on("keydown",function(t){var e=t.keyCode;if(e>57)return t.preventDefault(),!1;if(e>=48&&e<=57){var n=angular.element(t.target).val()+String.fromCharCode(e);if("undefined"!=typeof i.from&&i.from>n||"undefined"!=typeof i.to&&i.to<n)return t.preventDefault(),!1}})}}]}return t}();e.RangeInput=n})},{}],6:[function(t,e,n){!function(i){if("object"==typeof e&&"object"==typeof e.exports){var r=i(t,n);void 0!==r&&(e.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports","../utils/DatePickerTypes"],i)}(function(t,e){"use strict";var n=t("../utils/DatePickerTypes"),i=function(){function t(){}return t.prototype.createEventModelValue=function(t,e,i,r){var a=new n.EventModelValue;return a.numberOfEvents=t,a.importance=e,a.day=i,r&&(a.data=r),a},t.prototype.createEventEventModel=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var i=new n.EventModel;return i.data=t,i},t}();e.DatePickerService=i})},{"../utils/DatePickerTypes":8}],7:[function(t,e,n){!function(i){if("object"==typeof e&&"object"==typeof e.exports){var r=i(t,n);void 0!==r&&(e.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports"],i)}(function(t,e){"use strict";var n=function(){function t(){}return t.registerKeyBindings=function(t){t.on("keydown",function(e,n){return 13==e.keyCode?(e.preventDefault(),t.parents("form").find("input[type=submit]").click(),!1):40==e.keyCode?(t.find(".picker-open").click(),!1):27==e.keyCode?(t.find(".picker-close").click(),!1):void 0})},t.registerDocumentBindings=function(e,n){if(!n.documentClickHandler){var i=function(){t.unregisterDocumentBindings(n),e.find(".picker-close").click()};angular.element(document).bind("click",i),n.documentClickHandler=i}},t.unregisterDocumentBindings=function(t){t.documentClickHandler&&(angular.element(document).unbind("click",t.documentClickHandler),t.documentClickHandler=null)},t.registerPopupBindings=function(t){t.find(".picker-popup").on("click",function(t){t.stopImmediatePropagation(),t.stopPropagation()})},t.openDropDown=function(t,e){e.isOpen=!0,t.find(".dropdown").addClass("open")},t.closeDropDown=function(t,e){e.isOpen=!1,t.find(".dropdown").removeClass("open")},t}();e.BehavioralFixes=n})},{}],8:[function(t,e,n){var i=this&&this.__extends||function(t,e){function n(){
this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)};!function(i){if("object"==typeof e&&"object"==typeof e.exports){var r=i(t,n);void 0!==r&&(e.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports"],i)}(function(t,e){"use strict";e.Importance={LOW:"LOW",MEDIUM:"MEDIUM",HIGH:"HIGH",NONE:"NONE"};var n=function(){function t(){}return t}();e.EventModelValue=n;var r=function(){function t(){}return t}();e.EventModel=r;var a=function(){function t(t,e){this.invalid=t,this.momentDate=e}return t}(),o=function(t){function e(e,n,i,r,a){t.call(this,e,n),this.day=i,this.sameMonth=r,a&&(this.event=a)}return i(e,t),e}(a);e.PickerDate=o;var s=function(t){function e(e,n,i,r){t.call(this,e,n),this.month=i,this.sameYear=r}return i(e,t),e}(a);e.PickerMonth=s;var c=function(t){function e(e,n,i){t.call(this,e,n),this.year=i}return i(e,t),e}(a);e.PickerYear=c;var l=function(){function t(t,e){void 0===e&&(e=[]),this.calendarWeek=t,this.days=e}return t}();e.PickerWeek=l;var d=function(){function t(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=[]),this.dayOfWeek=e,this.weeks=n,this.year=t}return t}();e.DatePickerPage=d;var u=function(){function t(){this.months=[]}return t}();e.EventPickerPage=u;var m=function(){function t(t,e){void 0===e&&(e=[]),this.row=e,this.year=t}return t}();e.MonthPickerPage=m;var h=function(){function t(t){void 0===t&&(t=[]),this.row=t}return t}();e.YearPickerPage=h;var f=function(){function t(t,e){this.hour=t,this.minutes=e}return t}();e.TimeModel=f})},{}],9:[function(t,e,n){!function(i){if("object"==typeof e&&"object"==typeof e.exports){var r=i(t,n);void 0!==r&&(e.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports"],i)}(function(t,e){"use strict";var n=function(){function t(){}return t.isToday=function(e,n){var i=moment.tz(new Date,t.getTimezone(e));return i.isSame(n,"date")&&i.isSame(n,"month")&&i.isSame(n,"year")},t.isSameDay=function(t,e){return e.isSame(t,"date")&&e.isSame(t,"month")&&e.isSame(t,"year")},t.isCurrentMonth=function(e,n){var i=moment.tz(new Date,t.getTimezone(e));return i.isSame(n,"month")&&i.isSame(n,"year")},t.isSameMonth=function(e,n,i){var r=moment.tz(n,t.getTimezone(e));return r.isSame(i,"month")&&r.isSame(i,"year")},t.isCurrentYear=function(e,n){var i=moment.tz(new Date,t.getTimezone(e));return i.isSame(n,"year")},t.isSameYear=function(e,n,i){var r=moment.tz(n,t.getTimezone(e));return r.isSame(i,"year")},t.getTimezone=function(t){return t||moment.tz.guess()},t}();e.DateUtils=n})},{}],10:[function(t,e,n){!function(i){if("object"==typeof e&&"object"==typeof e.exports){var r=i(t,n);void 0!==r&&(e.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports","./DatePickerTypes"],i)}(function(t,e){"use strict";var n=t("./DatePickerTypes"),i=function(){function t(){}return t.calculateYearView=function(t,e,i,r){t||(t=new Date);var a=moment.tz(t,r),o=a.get("year")%20-1,s=20-o-1,c=moment.tz(t,r).startOf("year").startOf("month").startOf("day").subtract(o,"year"),l=moment.tz(t,r).endOf("year").endOf("month").endOf("day").add(s,"year"),d=e?moment.tz(e,r).startOf("year").startOf("month").startOf("day"):null,u=i?moment.tz(i,r).endOf("year").endOf("month").endOf("day"):null,m=0,h=new n.YearPickerPage,f=moment.range(c,l);return f.by("year",function(t){m%5==0&&h.row.push([]);var e=!1;d&&(e=e||t.startOf("day").isBefore(d)&&t.endOf("day").isBefore(d)),!e&&u&&(e=e||t.startOf("day").isAfter(u)&&t.endOf("day").isAfter(u)),h.row[h.row.length-1].push(new n.PickerYear(e,t,parseInt(t.tz(r).format("YYYY")))),m++}),h},t.calculateMonthView=function(t,e,i,r){t||(t=new Date);var a=moment.tz(t,r),o=moment.tz(t,r).startOf("year").startOf("month").startOf("day"),s=moment.tz(t,r).endOf("year").endOf("month").endOf("day"),c=e?moment.tz(e,r).startOf("month").startOf("day"):null,l=i?moment.tz(i,r).endOf("month").endOf("day"):null,d=moment.range(o,s),u=0,m=new n.MonthPickerPage(a.get("year"));return d.by("month",function(t){u%3==0&&m.row.push([]);var e=!1;c&&(e=e||t.startOf("day").isBefore(c)&&t.endOf("day").isBefore(c)),!e&&l&&(e=e||t.startOf("day").isAfter(l)&&t.endOf("day").isAfter(l)),m.row[m.row.length-1].push(new n.PickerMonth(e,t,t.tz(r).format("MMMM"),t.tz(r).isSame(a,"year"))),u++}),m},t.calculateDateView=function(t,e,i,r){t||(t=new Date);var a=moment.tz(t,r),o=moment.tz(t,r).startOf("month").startOf("week"),s=moment.tz(t,r).startOf("month").startOf("week").add(41,"days"),c=e?e:null,l=i?i:null,d=moment.range(o,s),u=[],m=[],h=0;return d.by("day",function(t){h%7==0&&u.push(new n.PickerWeek(t.tz(r).get("week")));var e=!1;c&&(e=e||t.startOf("day").isBefore(c)&&t.endOf("day").isBefore(c)),!e&&l&&(e=e||t.startOf("day").isAfter(l)&&t.endOf("day").isAfter(l)),u[u.length-1].days.push(new n.PickerDate(e,t,t.tz(r).get("date"),t.tz(r).isSame(a,"month"))),m.length<7&&m.push(t.tz(r).format("ddd")),h++}),new n.DatePickerPage(a.get("year"),m,u)},t.calculateEventDateView=function(e,i,r,a){var o=t.buildModelIdx(e,a),s=(moment.tz(i,a).startOf("month").startOf("week"),moment.tz(r,a).startOf("month").startOf("week").add(41,"days"),i?i:null),c=r?r:null,l=moment.tz(a),d=[],u=[],m=0,h=new n.EventPickerPage,f=moment.tz(i,a).startOf("month").startOf("week").add(41,"days");do{var p=moment.range(s,c);p.by("day",function(t){m%7==0&&d.push(new n.PickerWeek(t.tz(a).get("week")));var e=t.startOf("day").isBefore(s,"day")||t.endOf("day").isAfter(c,"day")||t.endOf("day").isAfter(t.clone().endOf("month")),i=t.format("dd.mm.yyyy"),r=o[i];d[d.length-1].days.push(new n.PickerDate(e,t,t.tz(a).get("date"),t.tz(a).isSame(l,"month"),r)),u.length<7&&u.push(t.tz(a).format("ddd")),m++}),h.months.push(new n.DatePickerPage(l.get("year"),u,d))}while(f.isBefore(c));return h},t.buildModelIdx=function(t,e){if(!t)return{};for(var n={},i=0;i<t.data.length;i++){var r=t.data[i],a=moment.tz(r.day,e).format("dd.mm.yyyy");n[a]=r}return n},t}();e.ViewModelBuilder=i})},{"./DatePickerTypes":8}]},{},[1]);
//# sourceMappingURL=./dist/DatePickerFinal-compressed.js.map
