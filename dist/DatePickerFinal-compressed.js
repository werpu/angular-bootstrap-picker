!function e(t,n,a){function r(o,c){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!c&&l)return l(o,!0);if(i)return i(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){var n=t[o][1][e];return r(n?n:e)},d,d.exports,e,t,n,a)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<a.length;o++)r(a[o]);return r}({1:[function(e,t,n){"use strict";var a=function(){function e(){}return e.registerKeyBindings=function(e){e.on("keydown",function(t,n){return 13==t.keyCode?(t.preventDefault(),e.parents("form").find("input[type=submit]").click(),!1):40==t.keyCode?(e.find(".picker-open").click(),!1):27==t.keyCode?(e.find(".picker-close").click(),!1):void 0})},e.registerDocumentBindings=function(t,n){if(!n.documentClickHandler){var a=function(){var a=event.target,r=!1;t.find(".picker-popup, .picker-popup *").each(function(e,t){if(r=r||t==a)return!1}),r||(e.unregisterDocumentBindings(n),t.find(".picker-close").click())};angular.element(document).bind("click",a),n.documentClickHandler=a}},e.unregisterDocumentBindings=function(e){e.documentClickHandler&&(angular.element(document).unbind("click",e.documentClickHandler),e.documentClickHandler=null)},e}();n.BehavioralFixes=a},{}],2:[function(e,t,n){"use strict";var a=e("./BehavioralFixes"),r=e("./ViewModelBuilder"),i=function(){function e(){this.template=function(){return'\n           <div class="input-group">\n               <input type="text" placeholder="{{ctrl.placeholder}}" class="form-control" name="{{ctrl.name}}" ng-model="ctrl.innerSelection"></input>\n               <span class="input-group-btn">\n                   <button class="picker-open btn btn-default" ng-click="ctrl._openPicker()">\n                         <span class="glyphicon glyphicon-align-right glyph-icon glyphicon-calendar"> {{ctrl.buttonLabel}} </span>\n                   </button>\n               </span> \n           </div>\n           <input type="button" class="picker-close" ng-click="ctrl._close()" value="Close" ng-show="false"/>\n           <!-- date view - default view -->\n           <div class="picker-popup date-picker" ng-show="ctrl.pickerVisible && ctrl.view == \'DATE\'">                \n                <table>\n                    <thead>\n                        <!-- TODO year forward and backward -->\n                       \n                        <tr>\n                            <td><a class="prev glyphicon glyphicon-menu-left" ng-click="ctrl._prevMonth()"></a><td colspan="2" ng-click="ctrl._switchToMonthView()">{{ctrl._currentDate.format("MMMM")}}</td><td><a class="next glyphicon glyphicon-menu-right" ng-click="ctrl._nextMonth()"></a></td>\n                            <td><a class="prev glyphicon glyphicon-menu-left" ng-click="ctrl._prevYear()"></a></td><td colspan="2" ng-click="ctrl._switchToYearView()">{{ctrl.monthPickerData.year}}</td><td><a class="next glyphicon glyphicon-menu-right" ng-click="ctrl._nextYear()"></a></td>\n                        </tr>\n                        <tr>\n                            <td class="calendarWeek"><!-- week of year --></td>\n                            <td class="dayOfWeek" ng-repeat="dayOfWeek in ctrl.monthPickerData.dayOfWeek" ng-click="ctrl._selectDate(dayOfWeek)">{{::dayOfWeek}}</td>    \n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr ng-repeat="week in ctrl.monthPickerData.weeks">\n                            <td class="calendarWeek">{{::week.calendarWeek}}</td>\n                            <td class="day" ng-repeat="day in week.days" ng-class="{\'outside\': !day.sameMonth, \'invalid\': day.invalid, \'selected\' : ctrl._isSelectedDate(day), \'today\': ctrl._isToday(day)}" ng-click="ctrl._selectDate(day)">{{::day.day}}</td>\n                        </tr>\n                    </tbody>\n                </table>\n                <input type="button" class="clear btn btn-default btn-sm" ng-click="ctrl._clear()" value="Clear" />\n                <input type="button" class="today btn btn-default btn-sm" ng-click="ctrl._today()" value="Today" />\n                <input type="button" class="picker-close btn btn-default btn-sm" ng-click="ctrl._close()" value="Close" />\n           </div>\n           \n           <!-- month view -->\n            <div class="picker-popup month-picker" ng-show="ctrl.pickerVisible && ctrl.view == \'MONTH\'">\n                 <table>\n                    <thead>\n                          <tr>\n                          <td><a class="prev glyphicon glyphicon-menu-left" ng-click="ctrl._prevYear()" class="glyphicon glyphicon-menu-left"></a></td>\n                          <td ng-click="ctrl._switchToYearView()">{{ctrl.monthPickerData.year}}</td>\n                          <td><a class="next glyphicon glyphicon-menu-right" ng-click="ctrl._nextYear()"></a></td>\n                          </tr>\n                    </thead>\n                    <tbody>\n                        <tr ng-repeat="monthRow in ctrl.yearPickerData.row">\n                            <td ng-repeat="month in monthRow" ng-class="{\'invalid\': month.invalid, \'selected\' : ctrl._isSameMonth(month), \'today\': ctrl._isSameMonth(month)}"\n                            ng-click="ctrl._selectMonth(month)"\n                            >{{::month.month}}</td>\n                        </tr>\n                    </tbody>\n                 </table>   \n            \n            \n                <input type="button" class="btn btn-default btn-sm" ng-click="ctrl._goBackInView()" value="Back" />\n            </div>    \n                 \n            <!-- year view -->  \n            <div class="picker-popup year-picker" ng-show="ctrl.pickerVisible && ctrl.view == \'YEAR\'">\n                  <table>\n                    <thead>\n                    <tr>\n                        <td><a ng-click="ctrl._prevDecade()" class="glyphicon glyphicon-menu-left"></a></td>\n                        <td colspan="3">{{ctrl.decadeFrom}} - {{ctrl.decadeTo}}</td>\n                        <td><a ng-click="ctrl._nextDecade()" class="glyphicon glyphicon-menu-right"></a></td>\n                    </tr>\n                    </thead>\n                    <tbody>\n                        <tr ng-repeat="yearrow in ctrl.decadePickerData.row">\n                            <td ng-repeat="year in yearrow"\n                            ng-class="{\'invalid\': year.invalid, \'selected\' : ctrl._isSameYear(year), \'today\': ctrl._isSameYear(year)}"\n                             ng-click="ctrl._selectYear(year)"\n                            >{{::year.year}}</td></td>\n                        </tr>\n                  </table>\n                <input type="button" class="btn btn-default btn-sm" ng-click="ctrl._goBackInView()" value="Back" />\n            </div>      \n                 \n        '},this.controllerAs="ctrl",this.bindings={name:"@",timezone:"@",startDate:"<",endDate:"<",dateFormat:"@",placeholder:"@",buttonLabel:"@"},this.require={ngModel:"ngModel"},this.controller=["$scope","$element","$timeout",function(e,t,n){var i=this;this.buttonLabel="undefined"==typeof this.buttonLabel||null==this.buttonLabel?"Date":this.buttonLabel,this.visibleDays=[],this.view="DATE",this.viewStack=[];var o=function(){return i.timezone||moment.tz.guess()},c=function(){return i.dateFormat||"DD.MM.YYYY"},l=function(e){for(var t=e,n=0;i.ngModel.$formatters&&n<i.ngModel.$formatters.length;n++)t=i.ngModel.$formatters[n](t);i.innerSelection=t};this._isSelectedDate=function(e){if(i.ngModel.$modelValue){var t=moment.tz(i.ngModel.$modelValue,o());return t.isSame(e.momentDate,"date")&&t.isSame(e.momentDate,"month")&&t.isSame(e.momentDate,"year")}return!1},this._isToday=function(e){var t=moment.tz(new Date,o());return t.isSame(e.momentDate,"date")&&t.isSame(e.momentDate,"month")&&t.isSame(e.momentDate,"year")},this._isTodayMonth=function(e){var t=moment.tz(new Date,o());return t.isSame(e.momentDate,"month")&&t.isSame(e.momentDate,"year")},this._isSameMonth=function(e){var t=moment.tz(new Date,o());return t.isSame(e.momentDate,"month")&&t.isSame(e.momentDate,"year")},this._isTodayYear=function(e){var t=moment.tz(new Date,o());return t.isSame(e.momentDate,"year")},this._isSameYear=function(e){var t=moment.tz(new Date,o());return t.isSame(e.momentDate,"year")},this._selectDate=function(e){e.invalid||(l(e.momentDate.toDate()),i._close())},this._selectMonth=function(e){e.invalid||(i.ngModel.$modelValue?(i._currentDate.set("month",e.momentDate.get("month")),i._currentDate.set("year",e.momentDate.get("year"))):i._currentDate=e,i._goBackInView())},this._selectYear=function(e){if(!e.invalid){if(i.ngModel.$modelValue){var t=moment.tz(i.ngModel.$modelValue,o());t.set("year",e.momentDate.get("year")),l(t.toDate())}else l(e.momentDate.toDate());i._goBackInView()}},this._updatePickerData=function(){i.monthPickerData=r.ViewModelBuilder.calculateDateView(i._currentDate.toDate(),i.startDate,i.endDate,o()),i.yearPickerData=r.ViewModelBuilder.calculateMonthView(i._currentDate.toDate(),i.startDate,i.endDate,o()),i.decadePickerData=r.ViewModelBuilder.calculateYearView(i._currentDate.toDate(),i.startDate,i.endDate,o());var e=i._currentDate.get("year")%20-1;i.decadeFrom=moment.tz(i._currentDate.toDate(),o()).subtract("year",e).format("YYYY");var e=i._currentDate.get("year")%20-1,t=20-e-1;i.decadeTo=moment.tz(i._currentDate.toDate(),o()).add("year",t).format("YYYY")},this._openPicker=function(){var e=i.timezone||moment.tz.guess();i._currentDate=i.ngModel.$modelValue?moment.tz(i.ngModel.$modelValue,e):moment.tz(new Date,e),i._updatePickerData(),i.pickerVisible=!0,i.documentClickHandler||n(function(){a.BehavioralFixes.registerDocumentBindings(t,i)})},this._prevMonth=function(){i._currentDate=i._currentDate.subtract(1,"month"),i._updatePickerData()},this._nextMonth=function(){i._currentDate=i._currentDate.add(1,"month"),i._updatePickerData()},this._prevYear=function(){i._currentDate=i._currentDate.subtract(1,"year"),i._updatePickerData()},this._nextYear=function(){i._currentDate=i._currentDate.add(1,"year"),i._updatePickerData()},this._prevDecade=function(){i._currentDate=i._currentDate.subtract(20,"year"),i._updatePickerData()},this._nextDecade=function(){i._currentDate=i._currentDate.add(20,"year"),i._updatePickerData()},this._clear=function(){i.innerSelection=""},this._today=function(){i.innerSelection=i.ngModel.$formatters[0](new Date),i._close()},this._close=function(){i.view="DATE",i.viewStack=[],i.pickerVisible=!1,a.BehavioralFixes.unregisterDocumentBindings(i)},this._switchToMonthView=function(){i.viewStack.unshift(i.view),i.view="MONTH"},this._switchToYearView=function(){i.viewStack.unshift(i.view),i.view="YEAR"},this._goBackInView=function(){i._updatePickerData(),i.view=i.viewStack.shift()},e.$watch("ctrl.innerSelection",function(e,t){e!=t&&i.ngModel.$setViewValue(e)}),this.$postLink=function(){a.BehavioralFixes.registerKeyBindings(t),i.ngModel.$render=function(){i.innerSelection=i.ngModel.$viewValue},i.ngModel.$parsers.push(function(e){return""==e?null:i.startDate&&e===moment.tz(i.startDate,o()).format(c())?i.startDate:i.endDate&&e===moment.tz(i.endDate,o()).format(c())?i.endDate:moment.tz(e,c(),o()).toDate()}),i.ngModel.$validators.validDate=function(e,t){return!t||moment.tz(t,c(),o()).isValid()},i.ngModel.$validators.dateRange=function(e,t){if(null==e)return!0;var n=i.timezone||moment.tz.guess(),a=moment.tz(e,n),r=i.startDate?moment.tz(i.startDate,n).startOf("day"):null,o=i.endDate?moment.tz(i.endDate,n).endOf("day"):null,c=!1;return r&&(c=c||a.isBefore(r)),!c&&o&&(c=c||a.isAfter(o)),!c},i.ngModel.$formatters.push(function(e){if(null==e)return"";var t=i.timezone||moment.tz.guess();return moment.tz(e,t).format(c())})},this.$onDestroy=function(){a.BehavioralFixes.unregisterDocumentBindings(i)}}]}return e}();angular.module("werpu.bootstrap.picker",[]).component("datePicker",new i)},{"./BehavioralFixes":1,"./ViewModelBuilder":4}],3:[function(e,t,n){"use strict";var a=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=function(){function e(e,t){this.invalid=e,this.momentDate=t}return e}(),i=function(e){function t(t,n,a,r){e.call(this,t,n),this.day=a,this.sameMonth=r}return a(t,e),t}(r);n.PickerDate=i;var o=function(e){function t(t,n,a,r){e.call(this,t,n),this.month=a,this.sameYear=r}return a(t,e),t}(r);n.PickerMonth=o;var c=function(e){function t(t,n,a){e.call(this,t,n),this.year=a}return a(t,e),t}(r);n.PickerYear=c;var l=function(){function e(e,t){void 0===t&&(t=[]),this.calendarWeek=e,this.days=t}return e}();n.PickerWeek=l;var s=function(){function e(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=[]),this.dayOfWeek=t,this.weeks=n,this.year=e}return e}();n.DatePickerPage=s;var d=function(){function e(e,t){void 0===t&&(t=[]),this.row=t,this.year=e}return e}();n.MonthPickerPage=d;var u=function(){function e(e){void 0===e&&(e=[]),this.row=e}return e}();n.YearPickerPage=u},{}],4:[function(e,t,n){"use strict";var a=e("./DatePickerTypes"),r=function(){function e(){}return e.calculateYearView=function(e,t,n,r){e||(e=new Date);var i=moment.tz(e,r),o=i.get("year")%20-1,c=20-o-1,l=moment.tz(e,r).startOf("year").startOf("month").startOf("day").subtract("year",o),s=moment.tz(e,r).endOf("year").endOf("month").endOf("day").add("year",c),d=t?moment.tz(t,r).startOf("year").startOf("month").startOf("day"):null,u=n?moment.tz(n,r).endOf("year").endOf("month").endOf("day"):null,m=0,f=new a.YearPickerPage,h=moment.range(l,s);return h.by("year",function(e){m%5==0&&f.row.push([]);var t=!1;d&&(t=t||e.startOf("day").isBefore(d)&&e.endOf("day").isBefore(d)),!t&&u&&(t=t||e.startOf("day").isAfter(u)&&e.endOf("day").isAfter(u)),f.row[f.row.length-1].push(new a.PickerYear(t,e,parseInt(e.tz(r).format("YYYY")))),m++}),f},e.calculateMonthView=function(e,t,n,r){e||(e=new Date);var i=moment.tz(e,r),o=moment.tz(e,r).startOf("year").startOf("month").startOf("day"),c=moment.tz(e,r).endOf("year").endOf("month").endOf("day"),l=t?moment.tz(t,r).startOf("month").startOf("day"):null,s=n?moment.tz(n,r).endOf("month").endOf("day"):null,d=moment.range(o,c),u=0,m=new a.MonthPickerPage(i.get("year"));return d.by("month",function(e){u%3==0&&m.row.push([]);var t=!1;l&&(t=t||e.startOf("day").isBefore(l)&&e.endOf("day").isBefore(l)),!t&&s&&(t=t||e.startOf("day").isAfter(s)&&e.endOf("day").isAfter(s)),m.row[m.row.length-1].push(new a.PickerMonth(t,e,e.tz(r).format("MMMM"),e.tz(r).isSame(i,"year"))),u++}),m},e.calculateDateView=function(e,t,n,r){e||(e=new Date);var i=moment.tz(e,r),o=moment.tz(e,r).startOf("month").startOf("week"),c=moment.tz(e,r).endOf("month").endOf("week"),l=t?t:null,s=n?n:null,d=moment.range(o,c),u=[],m=[],f=0;return d.by("day",function(e){f%7==0&&u.push(new a.PickerWeek(e.tz(r).get("week")));var t=!1;l&&(t=t||e.startOf("day").isBefore(l)&&e.endOf("day").isBefore(l)),!t&&s&&(t=t||e.startOf("day").isAfter(s)&&e.endOf("day").isAfter(s)),u[u.length-1].days.push(new a.PickerDate(t,e,e.tz(r).get("date"),e.tz(r).isSame(i,"month"))),m.length<7&&m.push(e.tz(r).format("ddd")),f++}),new a.DatePickerPage(i.get("year"),m,u)},e}();n.ViewModelBuilder=r},{"./DatePickerTypes":3}]},{},[2]);
//# sourceMappingURL=DatePickerFinal-compressed.js.map
